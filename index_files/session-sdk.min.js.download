var ZaloLoginWidget=function(){var o="production",i={ZALO_ME_DOMAIN:"staging"===o?"https://beta.id.zalo.me":"https://id.zalo.me",SUBMIT_ERROR_PATH:"/account/error/js?errorJs=",ACCOUNT_PREFIX:"https://accounts."},t=function(){};t.prototype.openWindowCenter=function(o,i,t,n){var e=screen.width/2-250+this.findLeftWindowBoundry(),l=screen.height/2-350+this.findTopWindowBoundry();return window.open(o,i,"height="+t+",width="+n+",left="+e+",top="+l)},t.prototype.findLeftWindowBoundry=function(){return window.screenLeft||window.screenX||0},t.prototype.findTopWindowBoundry=function(){return window.screenTop||window.screenY||0},t.prototype.isMobile=function(){var o,i=!1;return o=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4)))&&(i=!0),i},t.prototype.loadCSS=function(){var o=document.createElement("style");o.type="text/css",o.innerHTML='.zl-login {  display: -webkit-box;  display: -ms-flexbox;  display: flex;  -webkit-box-align: center;  -ms-flex-align: center;  align-items: center;  font-size: 14px;  cursor: pointer;} .zl-login .zl-login-avatar {  display: block;  -ms-flex-negative: 0;  flex-shrink: 0;  background-repeat: no-repeat;  background-size: cover;  background-position: center center;  width: 32px;  height: 32px;  margin-right: 5px;  border-radius: 100%;} .zl-login .zl-login-info {  -webkit-box-flex: 1;  -ms-flex-positive: 1;  flex-grow: 1;  min-width: 0;  display: -webkit-box;  display: -ms-flexbox;  display: flex;  -webkit-box-align: center;  -ms-flex-align: center;  align-items: center;  max-width: 120px;} .zl-login .zl-login-info.zl-is-dropdown {  position: relative;  min-height: 32px;} .zl-login .zl-login-info.zl-is-dropdown.zl-is-open .zl-login-dropdown-content {  display: block;} .zl-login .zl-login-info.zl-is-dropdown {  position: relative;  min-height: 32px;}.zl-login .zl-login-info.zl-is-dropdown.zl-is-open .zl-login-dropdown-content {  display: block;}.zl-login .zl-login-info.zl-is-dropdown .zl-login-dropdown-content {  display: none;  position: absolute;  top: 100%;  right: 0;  min-width: 160px;  padding-top: 5px;}.zl-login .zl-login-info.zl-is-dropdown .zl-login-dropdown-content ul {  background-color: #fff;  padding: 0;  -webkit-box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);  list-style: none;}.zl-login .zl-login-info.zl-is-dropdown .zl-login-dropdown-content ul li {  text-align: left;}.zl-login .zl-login-info.zl-is-dropdown .zl-login-dropdown-content ul li a {  display: block;  padding: 10px 20px;  color: #111;  border-bottom: 1px solid #f1f1f1;}.zl-login .zl-login-info.zl-is-dropdown .zl-login-dropdown-content ul li a:hover {  background-color: #fafafa;  opacity: 0.85;}.zl-login .zl-login-info.zl-is-dropdown .zl-login-dropdown-content ul li:last-child a {  border-bottom: 0;}.zl-login .zl-login-info .zl-login-username {  position: relative;  padding-right: 15px;}.zl-login .zl-login-info .zl-login-username span {  display: block;  max-width: 100px;  color: #111;  font-weight: 500;  overflow: hidden;  -o-text-overflow: ellipsis;  text-overflow: ellipsis;  white-space: nowrap;}.zl-login .zl-login-info .zl-login-username:before {  position: absolute;  top: 50%;  right: 0;  content: "";  height: 0;  width: 0;  border-left: 5px solid transparent;  border-right: 5px solid transparent;  border-top: 5px solid gray;  margin-top: -3px;}.zalo-login-button {  color: #008fec;  font-size: 14px;  font-weight: 700;}.zalo-login-widget {  margin-left: 10px;}',document.head.appendChild(o)},t.prototype.get_top_domain=function(o){for(var i,t=document.location.hostname.split("."),n=t.length-1;n>=0;n--)if(i=t.slice(n).join("."),n==t.length-o)return i;return i},t.prototype.getJSONWithCredentials=function(o,i){var t=new XMLHttpRequest;t.addEventListener("load",function(){i(JSON.parse(this.responseText))}),t.open("GET",o),t.withCredentials=!0,t.send()};var n=new t,e=function(){};e.prototype.loginRedirect=function(){window.location.href=i.ZALO_ME_DOMAIN+"/account?continue="+window.location.href},e.prototype.loginWithPopup=function(o,t,e,l){t||(t=650),e||(e=400);var a,s,d,r=(a="isZaloPopupLogin",s="1",window.location.origin+window.location.pathname+window.location.search+(window.location.search?"&":"?")+a+"="+s+window.location.hash),c=n.openWindowCenter(i.ZALO_ME_DOMAIN+"/account?continue="+r,"",t,e);if(!c)return this.loginRedirect();d=setInterval(function(){c.closed&&(clearInterval(d),this.getUserProfile(o,l))}.bind(this),300)},e.prototype.getUserProfile=function(o,i){n.getJSONWithCredentials(this.getAccountsDomain()+"?session_name="+o,i)},e.prototype.getAccountsDomain=function(){var o=n.get_top_domain(3);return o.indexOf("id.zalo.me")>=0?i.ZALO_ME_DOMAIN+"/account/userprofile":o.indexOf("baomoi.com")>=0?i.ACCOUNT_PREFIX+"baomoi.com/account/userprofile":o.indexOf("zingmp3.vn")>=0?i.ACCOUNT_PREFIX+"zingmp3.vn/account/userprofile":i.ACCOUNT_PREFIX+o+"/account/userprofile"},e.prototype.logout=function(){window.location.href=i.ZALO_ME_DOMAIN+"/account/logout?continue="+window.location.href},e.prototype.processLogout=function(){window.location.href=i.ZALO_ME_DOMAIN+"/account/logout?continue="+window.location.href},e.prototype.login=function(o,i,t,e){n.isMobile()?this.loginRedirect():this.loginWithPopup(o,i,t,e)};var l=new e,a=function(){this._response={}};a.prototype.init=function(i){this.data=i||{},this.data.showName=!1!==this.data.showName,this.data.domain=document.domain,this.element=document.getElementsByClassName("zalo-login-widget")[0],this.isUsingCustomizedUI=!(this.element||!this.data.avatarClassName&&!this.data.nameClassName&&!this.data.loginClassName),"staging"===o&&console.log("[ZaloLoginWidget] || data - ",this.data),this.data&&this.data.sessionName?l.getUserProfile(this.data.sessionName,function(o){if(0===o.error_code&&o.data.logged){this._response=o,this.render();try{window.location.search.substr(1).indexOf("isZaloPopupLogin=1")>=0&&window.close()}catch(o){console.warn("close popup error")}}else this.renderLoginButton();"function"==typeof this.data.callback&&this.data.callback(o),"function"==typeof this.data.onLoad&&this.data.onLoad(o)}.bind(this)):console.warn("[ZALO_SESSION_SDK] || CAN NOT FIND sessionName options")},a.prototype.detectClickOutSide=function(o){this.element.contains(o.target)||this.toggleDropDown(!1)},a.prototype.login=function(o){l.login(this.data.sessionName,650,650,function(i){0===i.error_code&&i.data&&i.data.logged&&(this._response=i,this.renderUser(i.data),this.data.onLogin&&"function"==typeof this.data.onLogin&&this.data.onLogin(i)),"function"==typeof o&&o(i)}.bind(this))},a.prototype.loginWithPopup=function(o){l.loginWithPopup(this.data.sessionName,650,650,function(i){0===i.error_code&&i.data&&i.data.logged&&(this._response=i,this.renderUser(i.data),this.data.onLogin&&"function"==typeof this.data.onLogin&&this.data.onLogin(i)),"function"==typeof o&&o(i)}.bind(this))},a.prototype.loginRedirect=function(){l.loginRedirect()},a.prototype.render=function(){0===this._response.error_code&&this._response.data.logged?this.renderUser(this._response.data):this.renderLoginButton(),this.data.onLoad&&"function"==typeof window[this.data.onLoad]&&window[this.data.onLoad]()},a.prototype.renderLoginButton=function(){if(!this.isUsingCustomizedUI&&this.element){this.element.className="zalo-login-widget zl-login";var o=document.createElement("a");o.innerHTML='<a class="zalo-login-button" href="javascript:void(0)">ĐĂNG NHẬP</a>',o.onclick=function(){this.login()}.bind(this),this.element.appendChild(o)}},a.prototype.renderUser=function(o){var i=this.data.showName?o.info.name:"",t=o.info.avatar;if(this.isUsingCustomizedUI){if(document.getElementsByClassName(this.data.nameClassName).length){var n=document.getElementsByClassName(this.data.nameClassName)[0];switch(n.tagName){case"A":n.text=i;break;case"DIV":n.innerHTML=i}}if(document.getElementsByClassName(this.data.avatarClassName).length){var e=document.getElementsByClassName(this.data.avatarClassName)[0];switch(e.tagName){case"IMG":e.src=t;break;case"DIV":e.style.backgroundImage='url("'+t+'")'}}}else{if(!this.element)return;this.element.className="zalo-login-widget zl-login";var l="";l+='<div class="zl-login" onclick="ZaloLoginWidget.toggleDropdown()">',l+='    <div class="zl-login-avatar" style="background-image:url('+t+')"></div>',l+='    <div class="zl-login-info zl-is-dropdown">',l+='        <div class="zl-login-username"><span>'+i+"</span></div>",l+='        <div class="zl-login-dropdown-content">',l+="        <ul>",l+='            <li><a href="javascript:void(0)" onclick="ZaloLoginWidget.logout()">Đăng xuất</a></li>',l+="        </ul>",l+="        </div>",l+="    </div>",l+="</div>",this.element.innerHTML=l,document.addEventListener("click",function(o){this.detectClickOutSide(o,this.div)}.bind(this)),document.addEventListener("touchstart",function(o){this.detectClickOutSide(o,this.div)}.bind(this))}},a.prototype.toggleDropDown=function(o){document.querySelector(".zl-login-info")&&(document.querySelector(".zl-login-info").className.indexOf("zl-is-open")>=0||!1===o?document.querySelector(".zl-login-info").className="zl-login-info zl-is-dropdown":document.querySelector(".zl-login-info").className="zl-login-info zl-is-dropdown zl-is-open")};var s=new a;function d(t){try{"staging"==o&&console.log(t),n.getJSONWithCredentials(i.ZALO_ME_DOMAIN+i.SUBMIT_ERROR_PATH+encodeURIComponent(t+""),function(){})}catch(o){}}function r(){try{if(!document.getElementById("zl-login-logout-confirm"))return;document.getElementById("zl-login-modal-backdrop").remove(),document.getElementById("zl-login-logout-confirm").remove()}catch(o){d(o)}}return n.loadCSS(),{init:function(o){try{s.init(o)}catch(o){d(o)}},getUserProfile:function(o){if(!l)throw Error("Not initialized!");try{l.getUserProfile(s.data.sessionName,o)}catch(o){d(o)}},toggleDropdown:s.toggleDropDown,login:function(o){try{s.login(o)}catch(o){d(o)}},loginWithPopup:function(o){try{s.loginWithPopup(o)}catch(o){d(o)}},loginRedirect:function(){try{s.loginRedirect()}catch(o){d(o)}},logout:l.logout,processLogout:l.processLogout,LoginWidgetPlugin:s,displayLogoutConfirm:function(){try{if(document.getElementById("zl-login-logout-confirm"))return;document.getElementsByTagName("BODY")[0].insertAdjacentHTML("beforeend",'<div id="zl-login-logout-confirm" style="width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:1470;display:flex;flex-direction:column;justify-content:center;align-items:center;"><div style="width: auto;min-width: 380px;max-width: 80%;margin-bottom:calc(12.5vh - 25px); height: auto; border: 1px solid #f2f5fa; border-radius: 4px; background: #fff; font-family: Arial, Helvetica, sans-serif;"><div style="background:#e5ecf9; padding: 10px 15px; border-bottom: 1px solid #ebebee; display: flex; justify-content: space-between; align-items: center"><h4 style="margin: 0; padding: 0; font-weight: 600; font-size: 20px;color: #2777FF">Zalo xác nhận</h4><a id="zl-login-logout-button-close" style="text-decoration: none; color: #2777FF; font-size: 18px" href="javascript:void(0)">x</a></div><div style="padding: 15px 15px; color: #373737"><p style="margin:0;padding:0;font-size:18px;line-height:30px;">Bạn có chắc chắn muốn đăng xuất khỏi Zalo</p><p style="margin:0;padding:0;font-size:15px;line-height:30px;">Hành động này sẽ đăng xuất Zalo Chat và các ứng dụng đăng nhập Zalo khác trên trình duyệt</p></div><div style="background: #fff; padding: 5px 15px; border-top: 1px solid #ebebee; text-align: right; font-weight: bold; font-size: 15px;"><a id="zl-login-logout-confirm-no" style="color: #fa5252; padding: 10px; text-decoration: none; display: inline-block;" href="javascript:void(0)">KHÔNG</a><a id="zl-login-logout-confirm-yes" style="color: #83878d;  padding:10px; text-decoration: none; display: inline-block;" href="javascript:void(0)">ĐĂNG XUẤT</a></div></div></div>'),document.getElementsByTagName("BODY")[0].insertAdjacentHTML("beforeend",'<div id="zl-login-modal-backdrop" style="opacity: .5;z-index: 1071;position: fixed;top: 0;left: 0;width: 100vw;height: 100vh;background-color: #000;"></div>'),document.getElementById("zl-login-logout-confirm-yes").onclick=l.processLogout,document.getElementById("zl-login-logout-confirm-no").onclick=r,document.getElementById("zl-login-logout-button-close").onclick=r,document.onkeydown=function(o){27==(o=o||window.event).keyCode&&r()}}catch(o){d(o)}},hideLogoutConfirm:r}}();